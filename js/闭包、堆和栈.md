## 闭包

### 变量作用域

变量根据作用域分为**全局变量**和**局部变量**

1. 函数内部可以使用全局变量
2. 函数外部不可以使用局部变量
3. 当函数执行完毕，本作用域内的局部变量就会被销毁（js的垃圾回收机制：是对内存的回收，当代码运行时就会占用内存，代码结束时就销毁。）



### 什么是闭包

**闭包**指有权访问另一个函数作用域中变量的**函数** ——JavaScript高级程序设计

- 闭包是个函数

- 简单理解就是一个作用域可以访问另一个函数内部的局部变量
- 闭包函数是被引用的局部变量所在的函数

```js
function fn(){
	var num=10;
    /*这里的fn是闭包函数，被引用的局部变量的函数就是闭包函数，这里被引用的局部变量是num*/
	function fun(){
		console.log(num)//10 在fun函数中访问了fn内的局部变量num
	}
    fun();
}
fn()
```

```js
//闭包主要作用:延伸了变量的作用范围
function fn(){
    var num=10;
    function fun(){
        console.log(num);
    }
    return fun;
}
var f=fn();
f();//闭包的作用：全局作用域访问函数内部局部变量的方法
```

这里的num按照js的回收机制在fn函数执行完毕后就会被销毁，但是此时不会被销毁是因为f()的存在，num变量还等着被调用，等调用完了才会被销毁。

### JS的数据类型

基本类型（值类型）:number string boolean null undefined symbol(ES6新增)

引用类型：object（函数也是对象）

### 堆栈内存

栈内存：存储基本类型值以及对象的指针

堆内存：存储引用类型

![image-20201217094307150](C:\Users\d1063\AppData\Roaming\Typora\typora-user-images\image-20201217094307150.png)

- 基本类型值在内存中占据固定大小的空间，因此被保存在栈内存中。
- 从一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本。
- 引用类型的值是对象，保存在堆内存中。
- 包含引用类型的值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针。
- 从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个对象。